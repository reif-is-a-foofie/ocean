#!/bin/bash

# OCEAN Global CLI Script
# This script allows OCEAN to be run from anywhere on the system.

# Get the actual OCEAN directory (resolve symlink if needed)
if [[ -L "$0" ]]; then
    # This script is a symlink, resolve it
    SCRIPT_DIR="$(cd "$(dirname "$(readlink "$0")")" && pwd)"
else
    # This script is the actual file
    SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
fi

# Change to the OCEAN directory
cd "$SCRIPT_DIR"

# Check if virtual environment exists
if [ ! -d "venv" ]; then
    echo "❌ Virtual environment not found. Please run './setup.sh' first."
    exit 1
fi

# Activate virtual environment
source venv/bin/activate

# Install/upgrade package if needed
pip install -e . > /dev/null 2>&1

# Run the ocean command using the entrypoint function
"$SCRIPT_DIR/venv/bin/python" "$SCRIPT_DIR/ocean_entrypoint.py" "$@"
